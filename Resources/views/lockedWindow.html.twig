<div class="modal fade" id="pageLockModal" tabindex="-1" role="dialog" aria-labelledby="pageLockModalLabel" aria-hidden="true">
    <div class="modal-dialog text-left">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="pageLockModalLabel"><i class="fa fa-circle-notch fa-spin"></i> {% trans %}This page is locked'{% endtrans %}</h5>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">{% trans %}Close{% endtrans %}</span></button>
            </div>
            <div class="modal-body">
                <p>{% trans %}This page is locked because another user is working on it. Please wait: the page will be unlocked automatically when the other user has finished, and you will be informed.{% endtrans %}</p>
                <div id="pageLockOverlayLED"></div>
                <p>{% trans with {'%s': lockedBy} %}Locked by %s.{% endtrans %}</p>
            </div>
            <div class="modal-footer">
                <button type="button" id="pageLockBackButton" class="btn btn-secondary" data-dismiss="modal">{% trans %}Back{% endtrans %}</button>
                <button type="button" id="pageLockRecheckButton" class="btn btn-primary" data-dismiss="modal"><i class="fa fa-sync"></i> {% trans %}Check again{% endtrans %}</button>
                <button type="button" id="pageLockIgnoreButton" class="btn btn-danger" data-dismiss="modal"><i class="fa fa-exclamation-triangle"></i> {% trans %}Ignore lock{% endtrans %}</button>
            </div>
        </div>
    </div>
</div>
{% set customScript %}
    <script>
    /* <![CDATA[ */
        ( function($) {
            $(document).ready(function() {
                {% if lockName is not empty %}
                    {% if hasLock %}
                        $(document).ready(PageLock.UnlockedPage);
                    {% else %}
                        $(document).ready(PageLock.LockedPage);
                    {% endif %}
                {% endif %}
            });
        })(jQuery);

        PageLock.LockName = '{{ lockName }}';
        PageLock.ReturnUrl = '{{ returnUrl }}';
        PageLock.PingTime = {{ pingTime }};
    /* ]]> */
    </script>
{% endset %}
{{ pageAddAsset('footer', customScript) }}
